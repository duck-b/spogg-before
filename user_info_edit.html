<? include("header/header.html");?>
<? include("header/menu.html"); ?>
<?
if(!$user_no){
	echo "<script>alert('로그인이 필요한 기능입니다.');";
	echo "window.location.replace('login.html');</script>";
}else{
	if($user_row['gender'] == 1){
		$gender = "남자";
	}else if($user_row['gender'] == 2){
		$gender = "여자";
	}
	if($user_row['status'] == 1){
		$stau = "선수";
		include "dbconn.php";
		$player_result = mysqli_query($conn,"SELECT * FROM user_player WHERE user='$user_no'");
		$player_row = mysqli_fetch_array($player_result);
		mysqli_close($conn);
		if($player_row['playercheck'] == 1){
			$playercheck = "선출";
		}else if($player_row['playercheck'] == 2){
			$playercheck = "비선출";
		}else{
			$playercheck = "";
		}
		if($player_row['playerclass'] == 1){
			$playerclass1 = "checked";
			$playerclass2 = "";
			$playerclass3 = "";
			$playerclass4 = "";
		}else if($player_row['playerclass'] == 2){
			$playerclass1 = "";
			$playerclass2 = "checked";
			$playerclass3 = "";
			$playerclass4 = "";
		}else if($player_row['playerclass'] == 3){
			$playerclass1 = "";
			$playerclass2 = "";
			$playerclass3 = "checked";
			$playerclass4 = "";
		}else if($player_row['playerclass'] == 4){
			$playerclass1 = "";
			$playerclass2 = "";
			$playerclass3 = "";
			$playerclass4 = "checked";
		}else{
			$playerclass1 = "";
			$playerclass2 = "";
			$playerclass3 = "";
			$playerclass4 = "";
		}
		if($player_row['hitpitch'] == 1){
			$hitpitch1 = "checked";
			$hitpitch2 = "";
			$hitpitch3 = "";
			$hitpitch4 = "";
		}else if($player_row['hitpitch'] == 2){
			$hitpitch1 = "";
			$hitpitch2 = "checked";
			$hitpitch3 = "";
			$hitpitch4 = "";
		}else if($player_row['hitpitch'] == 3){
			$hitpitch1 = "";
			$hitpitch2 = "";
			$hitpitch3 = "checked";
			$hitpitch4 = "";
		}else if($player_row['hitpitch'] == 4){
			$hitpitch1 = "";
			$hitpitch2 = "";
			$hitpitch3 = "";
			$hitpitch4 = "checked";
		}else{
			$hitpitch1 = "";
			$hitpitch2 = "";
			$hitpitch3 = "";
			$hitpitch4 = "";
		}
		if($player_row['position'] == 1){
			$pitcher = "";
			$infp = "checked";
			$outfp = "";
		}else if($player_row['position'] == 2){
			$pitcher = "";
			$infp = "";
			$outfp = "checked";
		}else if($player_row['position'] == 3){
			$pitcher = "checked";
			$infp = "";
			$outfp = "";
		}else{
			$pitcher = "";
			$infp = "";
			$outfp = "";
		}
		if($player_row['playertall'] == 0){
			$playertall = "";
		}else{
			$playertall = $player_row['playertall'];
		}
		if($player_row['playerweight'] == 0){
			$playerweight = "";
		}else{
			$playerweight = $player_row['playerweight'];
		}
		if($player_row['back_num'] == 0){
			$back_num = "";
		}else{
			$back_num = $player_row['back_num'];
		}
		$team_form = "";
		$team_count = 0;
		if($player_row['team']){
			$team_list = explode('|' , $player_row['team']);
			for($i = 1 ; $i <= count($team_list); $i++){
				if($i == count($team_list)){
					$team_form .= "<div id='team_form".$i."' style='min-height:0px !important;'>
								<input type='text' class='form-control form-control_90' id='team".$i."' name='team[]' value='".$team_list[$i-1]."'><a id='team".$i."_btn' href='javascript:;' style='margin-left:12px;'><i class='fas fa-plus' style='color:#5383e8;' onclick='team_plus(".$i.")'></i></a>
							</div>";
				}else{
					$team_form .= "<div id='team_form".$i."' style='min-height:0px !important;'>
							<input type='text' class='form-control form-control_90' id='team".$i."' name='team[]' value='".$team_list[$i-1]."'><a id='team".$i."_btn' href='javascript:;' style='margin-left:12px;'><i class='fas fa-minus' style='color:#e85383;' onclick='team_minus(".$i.")'></i></a>
						</div>";
				}
				$team_count++;
			}
		}else{
			$team_form = "<div id='team_form1' style='min-height:0px !important;'>
							<input type='text' class='form-control form-control_90' id='team1' name='team[]' value=''><a id='team1_btn' href='javascript:;' style='margin-left:12px;'><i class='fas fa-plus' style='color:#5383e8;' onclick='team_plus(1)'></i></a>
				        </div>";
			$team_count++;
		}
	}else if($user_row['status'] == 2){
		$stau = "강사";
	}
	if($user_row['gender'] == 1){
		$gender_m = "checked";
		$gender_f = "";
	}else if($user_row['gender'] == 2){
		$gender_m = "";
		$gender_f = "checked";
	}else{
		$gender_m = "";
		$gender_f = "";
	}
}
?>
<div class="ro_subpage page_player">
	<div class="container ro_subpage_accountedit ro_subpage_content" style="margin-top:80px;margin-bottom:40px">
		<div class="modal fade" id="defaultModal_editpw">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<div class="to_page_part_title">
							비밀번호 변경
						</div>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
						<hr>
					</div>
					<div class="modal-body" id="modalbody_account">
						
					</div>
					<div class="modal-footer" id="modal-footer_editpw">

					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<!-- 비밀번호 변경 모달창 -->
		<form action="UserUpdateProc.php" method="post" enctype="multipart/form-data">
			<div class="row to_mb_40">
				<div class="col-xs-12 col-sm-3 col-md-3">
					<div class="form-group" id="divProfile">
						<div class="filebox bs3-primary border rounded">
	                       	<label for="ex_filename"><div id='View_area' class="img_View_area"></div></label> 
	                       	<input type="file" id="ex_filename" name="img" class="upload-hidden"  onchange="previewImage(this,'View_area')" accept='image/*'> 
	                    </div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-9 col-md-9 ro_subpage_accountedit_right">
					<div class="row to_mb_40">
						<div class="col-xs-12 col-sm-12 col-md-12">
							<div class="to_page_part_title">
								필수정보 수정
							</div>
							<hr>
						</div>	
						<div class="form-group" id="divStatus">
							<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputStatus">구분</label></div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
								<input type="text" class="form-control" id="inputStatus" value="<?=$stau?>" data-rule-required="true" disabled>
					        </div>
					    </div>
					    <div class="form-group" id="divEmail">
					    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputEmail">이메일(ID)</label></div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
								<input type="text" class="form-control" id="inputEmail" value="<?=$user_row['email']?>" data-rule-required="true" disabled>
					        </div>
					    </div>
						<div class="form-group" id="divName">
					    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputName">이름</label></div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
								<input type="text" class="form-control" id="inputName" value="<?=$user_row['name']?>" data-rule-required="true" disabled>
					        </div>
					    </div>
						<div class="form-group" id="divPassword" style="margin-bottom:10px">
							<div class="col-xs-12 col-sm-12 col-md-3 control-label">
								<label for="inputPassword">비밀번호 변경</label>
								<?if($user_row['sns_login'] != 0){?>
								<br><small style="color:red">SNS로그인은 비밀번호 변경 불가</small>
								<? } ?>
							</div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
								<?if($user_row['sns_login'] == 0){?>
					            <input type="button" id="ro_checkbtn" class="ro_checkbtn" onclick="editpassword()" value="비밀번호 변경">
								<? } else { ?>
								<input type="button" id="ro_checkbtn" class="ro_checkbtn" value="비밀번호 변경 불가" disabled>
								<? } ?>
					        </div>
					    </div>
					    <div class="form-group" id="divPhoneNumber">
					    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputPhoneNumber">연락처</label></div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
					            <input type="tel" class="form-control onlyNumber" id="phone" name="phone" data-rule-required="true" value="<?=$user_row['phone']?>" placeholder="-를 제외하고 숫자만 입력하세요." maxlength="11">
					        </div>
					    </div>
					    
					    <div class="form-group" id="divGender">
					    	<div class="col-xs-12 col-sm-12 col-md-3 control-label">
								<label for="inputGender">성별</label>
								<? if($gender_f == "" && $gender_m == ""){ ?>
								<br><small style="color:red">입력후 변경 불가</small>
								<? } ?>
							</div>
					        <div class="col-xs-12 col-sm-12 col-md-9">
								<? if($gender_f == "" && $gender_m == ""){ ?>
								<div class="col-xs-6 col-sm-6 col-md-6" style="margin-bottom:15px">
									<input type="radio" id="gender_m" name="gender" value="1"/><label for="gender_m">남자</label>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6" style="margin-bottom:15px">
									<input type="radio" id="gender_w" name="gender" value="2"/><label for="gender_w">여자</label>
								</div>
								<? } else {?>
								<input type="text" class="form-control" id="inputGender" name="gender" value="<?=$gender?>" data-rule-required="true" disabled>
								<? } ?>
					        </div>
					    </div>
					    <div class="form-group" id="divBirth">
					    	<div class="col-xs-12 col-sm-12 col-md-3 control-label">
								<label for="inputBirth">생년월일</label>
								<?if($user_row['birth'] == '0000-00-00'){?>
								<br><small style="color:red">입력후 변경 불가</small>
								<? } ?>
							</div>
							<div class="col-xs-12 col-sm-12 col-md-9">
							<?if($user_row['birth'] != '0000-00-00'){?>
								<input type="text" class="form-control" id="inputBirth" name="birth" value="<?=$user_row['birth']?>" data-rule-required="true" disabled>
							<? } else {?>
								<select class="form-control ro_select_3" id="birth_y" name="birth_y">
									<option value="0000">년</option>
									<?
										for($y=2019; $y>1950;$y--){
									?>
										<option value=<?=$y ?>><?=$y ?></option>
									<?		
										}
									?>
								</select>  
								<select class="form-control ro_select_3" id="birth_m" name="birth_m" onchange="selectmonth(this.value)">
										<option value="00">월</option>
									<?
										for($m=1; $m<13;$m++){
									?>
										<option value=<?=$m ?>><?=$m ?></option>
									<?		
										}
									?>    
								</select>  
								<select class="form-control ro_select_3" id="birth_d" name="birth_d">
									   <option value="00">일</option>
								</select>
							<? } ?>
							</div>
					    </div>
					</div>
					 <div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12">
							<div class="to_page_part_title">
								추가정보
							</div>
							<hr>
						</div>		
					</div>
					
					<div class="form-group" id="divPlayerCheck">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label">
							<label for="inputPlayerCheck">선출여부</label>
							<?if(!$playercheck){?>
							<br><small style="color:red">입력후 변경 불가</small>
							<? } ?>
						</div>
				        <div class="col-xs-12 col-sm-6 col-md-9">
							<?if($playercheck){?>
							<input type="text" class="form-control" id="inputStatus" name="playercheck" value="<?=$playercheck?>" data-rule-required="true" disabled>
							<? } else { ?>
							<div class="col-xs-6 col-sm-6 col-md-3">
								<input type="radio" id="playerCheck_y" name="playercheck" value="1"/><label for="playerCheck_y">선출</label>
							</div>
							<div class="col-xs-6 col-sm-6 col-md-3">
								<input type="radio" id="playerCheck_n" name="playercheck" value="2"/><label for="playerCheck_n">비선출</label>
							</div> 
							<? } ?>
				        </div>
				    </div>
				    
				    <div class="form-group" id="divPosition">
				    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputPosition">주 포지션</label></div>
				        <div class="col-xs-12 col-sm-9 col-md-9">
				        	<div class="col-xs-4 col-sm-4 col-md-3">
				        		<input type="radio" id="position1" name="position" value="1" <?=$infp?>/><label for="position1">내야수</label>
				        	</div>
				            <div class="col-xs-4 col-sm-4 col-md-3">
				            	<input type="radio" id="position2" name="position" value="2" <?=$outfp?>/><label for="position2">외야수</label>
				            </div>
				            <div class="col-xs-4 col-sm-4 col-md-3">
				            	<input type="radio" id="position3" name="position" value="3" <?=$pitcher?>/><label for="position3">투수</label>
				            </div>           
				        </div>
				    </div>
				    
				    <div class="form-group" id="divHitPitch">
				    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputHitPitch" class="control-label">투/타</label></div>
				        <div class="col-xs-12 col-sm-12 col-md-9">
				        	<div class="col-xs-3 col-sm-3 col-md-3">
				        		<input type="radio" id="hitpitch1" name="hitpitch" value="1" <?=$hitpitch1?>/><label for="hitpitch1">우투우타</label>
				        	</div>
				            <div class="col-xs-3 col-sm-3 col-md-3">
				            	<input type="radio" id="hitpitch2" name="hitpitch" value="2" <?=$hitpitch2?>/><label for="hitpitch2">우투좌타</label>
				            </div>
				            <div class="col-xs-3 col-sm-3 col-md-3">
				            	<input type="radio" id="hitpitch3" name="hitpitch" value="3" <?=$hitpitch3?>/><label for="hitpitch3">좌투우타</label>
				            </div>    
				            <div class="col-xs-3 col-sm-3 col-md-3">
				            	<input type="radio" id="hitpitch4" name="hitpitch" value="4" <?=$hitpitch4?>/><label for="hitpitch4">좌투좌타</label>
				            </div>          
				        </div>
				    </div>
					<div class="form-group" id="divPlayerClass">
				    	<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="inputPlayerClass" class="control-label">활동 리그</label></div>
				        <div class="col-xs-12 col-sm-12 col-md-9">
				        	<div class="col-xs-3 col-sm-3 col-md-3">
								<input type="radio" id="playerclass1" name="playerclass" value="1" <?=$playerclass1?>/><label for="playerclass1">사회인 1부</label>
							</div>
							<div class="col-xs-3 col-sm-3 col-md-3">
								<input type="radio" id="playerclass2" name="playerclass" value="2" <?=$playerclass2?>/><label for="playerclass2">사회인 2부</label>
							</div>
							<div class="col-xs-3 col-sm-3 col-md-3">
								<input type="radio" id="playerclass3" name="playerclass" value="3" <?=$playerclass3?>/><label for="playerclass3">사회인 3부</label>
							</div>    
							<div class="col-xs-3 col-sm-3 col-md-3">
								<input type="radio" id="playerclass4" name="playerclass" value="4" <?=$playerclass4?>/><label for="playerclass4">사회인 4부</label>
							</div>          
						</div>
				    </div>
					<div class="form-group" id="divAddress">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="address">주 활동 지역</label></div>
						<div class="col-xs-12 col-sm-6 col-md-9">
							<input type="text" class="form-control onlyHangul" id="address" name="address" data-rule-required="true" value="<?=$player_row['address']?>" placeholder="한글만 입력 가능합니다." maxlength="30">
						</div>
					</div>
				    <div class="form-group" id="divTall">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="playertall">신장</label></div>
				        <div class="col-xs-12 col-sm-6 col-md-9">
							<input type="text" class="form-control form-control_90 onlyNumber" id="playertall" name="playertall" value="<?=$playertall?>" data-rule-required="true" placeholder="숫자만 입력해주세요" maxlength="3">&nbsp; cm
				        </div>
				    </div>
				    <div class="form-group" id="divWeight">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="playerweight">체중</label></div>
				        <div class="col-xs-12 col-sm-6 col-md-9">
							<input type="text" class="form-control form-control_90 onlyNumber" id="playerweight" name="playerweight" value="<?=$playerweight?>" data-rule-required="true" placeholder="숫자만 입력해주세요" maxlength="3">&nbsp; kg
				        </div>
				    </div>
					<div class="form-group" id="divBackNum">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="back_num">등번</label></div>
						<div class="col-xs-12 col-sm-6 col-md-9">
							No.&nbsp;<input type="text" class="form-control form-control_90 onlyNumber" id="back_num" name="back_num" value="<?=$back_num?>" data-rule-required="true" placeholder="숫자만 입력해주세요" pattern="\d{1,2}" maxlength="2">
						</div>
					</div>
					<div class="form-group" id="team">
						<div class="col-xs-12 col-sm-12 col-md-3 control-label"><label for="team">소속팀</label></div>
						<div class='col-xs-12 col-sm-6 col-md-9'>
							<?=$team_form?>
						</div>
				    </div>
				</div>
			</div>
			<div class="form-group">
		        <div class="col-xs-12 col-sm-12 col-md-12 text-center">
		            <button type="submit" class="btn btn-default">저장</button>
		        </div>
		    </div>
		</form>
	</div>
</div>

<script type="text/javascript">
var team_count = <?=$team_count;?>;
function team_plus(num){
	document.getElementById("team"+num+"_btn").innerHTML = "<i class='fas fa-minus' style='color:#e85383;' onclick='team_minus("+num+")'></i>";
	team_count = team_count + 1;
	var newDiv = document.createElement("div");
	newDiv.id = 'team_form'+team_count;
	newDiv.style = 'min-height:0px !important';
	newDiv.innerHTML = "<input type='text' class='form-control form-control_90' id='team"+team_count+"' name='team[]' value=''><a id='team"+team_count+"_btn' href='javascript:;' style='margin-left:12px;'><i class='fas fa-plus' style='color:#5383e8;' onclick='team_plus("+team_count+")'></i></a>";
	document.getElementById('team_form'+num).appendChild(newDiv);
}
function team_minus(num){
	document.getElementById("team"+num).style.display = "none";
	document.getElementById("team"+num).value = "";
	document.getElementById("team"+num+"_btn").style.display = "none";
}

function selectmonth(obj) {		//생년월일 - 월 선택 후 일
	console.log("obj : "+obj);
	$("select#birth_d option").remove();
	years = $("#birth_y option:selected").val();
	var day;
	if(obj=="1" || obj=="3" || obj=="5" || obj=="7" || obj=="8" || obj=="10" || obj=="12"){
		day = 31;
	}else if(obj=="2"){
		if(years%4 == 0){
			day = 29;
		}else{
			day = 28;
		}
	}else{
		day=30;
	}
	
	for(var i=1;i<=day;i++){
		$("#birth_d").append("<option value='"+i+"'>"+i+"</option>");
	}
	
}
$(".onlyNumber").keyup(function(event){
	if (!(event.keyCode >=37 && event.keyCode<=40)) {
		var inputVal = $(this).val();
		$(this).val(inputVal.replace(/[^0-9]/gi,''));
	}
});
$(document).ready(function(){
	  var fileTarget = $('.filebox .upload-hidden');

	    fileTarget.on('change', function(){
	        if(window.FileReader){
	            var filename = $(this)[0].files[0].name;
	        } else {
	            var filename = $(this).val().split('/').pop().split('\\').pop();
	        }

	        $(this).siblings('.upload-name').val(filename);
	    });
	}); 
function previewImage(targetObj, View_area) {
	var preview = document.getElementById(View_area); //div id
	var ua = window.navigator.userAgent;

  //ie일때(IE8 이하에서만 작동)
	if (ua.indexOf("MSIE") > -1) {
		targetObj.select();
		try {
			var src = document.selection.createRange().text; // get file full path(IE9, IE10에서 사용 불가)
			var ie_preview_error = document.getElementById("ie_preview_error_" + View_area);


			if (ie_preview_error) {
				preview.removeChild(ie_preview_error); //error가 있으면 delete
			}

			var img = document.getElementById(View_area); //이미지가 뿌려질 곳

			//이미지 로딩, sizingMethod는 div에 맞춰서 사이즈를 자동조절 하는 역할
			img.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')";
		} catch (e) {
			if (!document.getElementById("ie_preview_error_" + View_area)) {
				var info = document.createElement("<p>");
				info.id = "ie_preview_error_" + View_area;
				info.innerHTML = e.name;
				preview.insertBefore(info, null);
			}
		}
  //ie가 아닐때(크롬, 사파리, FF)
	} else {
		var files = targetObj.files;
		for ( var i = 0; i < files.length; i++) {
			var file = files[i];
			var imageType = /image.*/; //이미지 파일일경우만.. 뿌려준다.
			if (!file.type.match(imageType))
				continue;
			var prevImg = document.getElementById("prev_" + View_area); //이전에 미리보기가 있다면 삭제
			if (prevImg) {
				preview.removeChild(prevImg);
			}
			var img = document.createElement("img"); 
			img.id = "prev_" + View_area;
			img.classList.add("obj");
			img.file = file;
	
			preview.appendChild(img);
			if (window.FileReader) { // FireFox, Chrome, Opera 확인.
				var reader = new FileReader();
				reader.onloadend = (function(aImg) {
					return function(e) {
						aImg.src = e.target.result;
					};
				})(img);
				reader.readAsDataURL(file);
			} else { // safari is not supported FileReader
				//alert('not supported FileReader');
				if (!document.getElementById("sfr_preview_error_"
						+ View_area)) {
					var info = document.createElement("p");
					info.id = "sfr_preview_error_" + View_area;
					info.innerHTML = "not supported FileReader";
					preview.insertBefore(info, null);
				}
			}
		}
	}
}
</script>
<script>
var modalContents_editpw = $("#modalbody_account");
var modal_editpw = $("#defaultModal_editpw");
var modal_footer_editpw = $("#modal-footer_editpw");
function editpassword() {		//pw 변경 변경 스크립트
	modalContents_editpw.empty();
	
	var eidtpw_form = "<div>"
		+"		<div class='form-group'>"
		+"			<label  class='col-xs-12 col-sm-4 col-md-4 control-label'>현재 비밀번호</label>"
		+"			<div class='col-xs-12 col-sm-8 col-md-8'>"
		+"				<input type='password' class='form-control onlyHangul' id='password' name='password' data-rule-required='true' placeholder='현재 비밀번호를 입력해주세요.'>"
		+"			</div>"
		+"		</div>"
		+"	</div>"
	
	modalContents_editpw.append(eidtpw_form);
	
	var editpw_footer = "<input type='button' class='btn btn-default'  value='확인'  onclick='select_result(password.value)'>";
	modal_footer_editpw.empty();
    modal_footer_editpw.append(editpw_footer);
	
	modal_editpw.modal('show');
}
function select_result(password) {
	$.ajax({
		type: 'POST',
		url: 'select_pw.php',
		data: {
			password : password,
			status : 1
		},
		dataTpye: 'text',
		success: function(data){
			modalContents_editpw.empty();
			if(data != 0){
				var eidtpw_form = "<div>"
					+"		<div class='form-group' id='divPassword'>"
					+"			<label  class='col-xs-12 col-sm-4 col-md-4 control-label'>비밀번호</label>"
					+"			<div class='col-xs-12 col-sm-8 col-md-8'>"
					+"				<input type='password' class='form-control' id='passwordChange' name='passwordChange' data-rule-required='true' placeholder='특수문자 / 문자 / 숫자 모두 포함 형태의 8~15자리 이내' maxlength='30'>"
					+"			</div>"
					+"		</div>"
					+"		<div class='form-group' id='divPasswordCheck'>"
					+"			<label  class='col-xs-12 col-sm-4 col-md-4 control-label'>비밀번호 확인</label>"
					+"			<div class='col-xs-12 col-sm-8 col-md-8'>"
					+"				<input type='password' class='form-control' id='passwordCheck' name='passwordCheck' data-rule-required='true' placeholder='패스워드 확인' maxlength='30'>"
					+"			</div>"
					+"		</div>"
					+"	</div>"
				
				modalContents_editpw.append(eidtpw_form);
				modal_footer_editpw.empty();
				modal_footer_editpw.append("<input type='button' class='btn btn-default'  value='변경'  onclick='editpw_result(passwordChange.value,passwordCheck.value)'>");
				modal_editpw.modal('show');
			}else{
				modalContents_editpw.text("비밀번호가 일치하지 않습니다.");
				modal_footer_editpw.empty();
				modal_footer_editpw.append("<input type='button' class='btn btn-default'  value='확인' data-dismiss='modal'>");
				modal_editpw.modal('show');
			}
		},
		error: function(data) {
		
		}
	});
}
function editpw_result(pwchange, pwcheck) {
	modalContents_editpw.empty();
	var pw_pattern= /^.*(?=^.{8,15}$)(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/;
	if(pw_pattern.test(pwchange) == true){
		if(pwchange == pwcheck){
			$.ajax({
				type: 'POST',
				url: 'edit_pw.php',
				data: {
					password : pwchange
				},
				dataTpye: 'text',
				success: function(data){
					modalContents_editpw.text("비밀번호가 변경되었습니다.");
					modal_footer_editpw.empty();
					modal_footer_editpw.append("<input type='button' class='btn btn-default'  value='확인' data-dismiss='modal'>");
					modal_editpw.modal('show');
				},
				error: function(data) {
				
				}
			});
		}else{
			modalContents_editpw.text("비밀번호가 일치하지 않습니다.");
			modal_footer_editpw.empty();
			modal_footer_editpw.append("<input type='button' class='btn btn-default'  value='확인' data-dismiss='modal'>");
			modal_editpw.modal('show');
		}
	}else{
		modalContents_editpw.text("요청한 형식과 일치하지 않습니다.");
		modal_footer_editpw.empty();
		modal_footer_editpw.append("<input type='button' class='btn btn-default'  value='확인' data-dismiss='modal'>");
		modal_editpw.modal('show');
	}
}
</script>
<? include("footer/footer.html"); ?>	
</body>
</html>