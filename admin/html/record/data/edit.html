<!DOCTYPE HTML>
<?
$no = $_GET['no'];
if($_GET['pos'] == "타자"){
	include "dbconn.php";
	$record_result = mysqli_query($conn, "SELECT * FROM data_before_hit WHERE no = '$no'");
	$record_row = mysqli_fetch_array($record_result);
	mysqli_close($conn);
	$league_name = $record_row['league_name'];
	$team_name = $record_row['team_name'];
	$at_game = $record_row['at_game'];
	$at_play = $record_row['at_play'];
	$at_bat = $record_row['at_bat'];
	$hit1 = $record_row['hit1'];
	$hit2 = $record_row['hit2'];
	$hit3 = $record_row['hit3'];
	$hr = $record_row['hr'];
	$b4 = $record_row['b4'];
	$hbp = $record_row['hbp'];
	$sb = $record_row['sb'];
	$sf = $record_row['sf'];
	$sh = $record_row['sh'];
	$so = $record_row['so'];
	$rs = $record_row['rs'];
	$rbi = $record_row['rbi'];
	$hit = $hit1 + $hit2 + $hit3 +$hr;
}else if($_GET['pos'] == '투수'){
	include "dbconn.php";
	$record_result = mysqli_query($conn, "SELECT * FROM data_before_pic WHERE no = '$no'");
	$record_row = mysqli_fetch_array($record_result);
	mysqli_close($conn);
	$league_name = $record_row['league_name'];
	$team_name = $record_row['team_name'];
	$at_game = $record_row['at_game'];
	$inning = $record_row['inning'];
	$play_win = $record_row['play_win'];
	$play_lose = $record_row['play_lose'];
	$play_save = $record_row['play_save'];
	$play_hold = $record_row['play_hold'];
	$pitcher_count = $record_row['pitcher_count'];
	$so = $record_row['so'];	
	$hit1 = $record_row['hit1'];
	$hit2 = $record_row['hit2'];
	$hit3 = $record_row['hit3'];
	$hr = $record_row['hr'];
	$er = $record_row['er'];
	$b4 = $record_row['b4'];
	$hbp = $record_row['hbp'];
	$at_play = $record_row['at_play'];
	$at_bat = $record_row['at_bat'];
	$sf = $record_row['sf'];
	$sh = $record_row['sh'];
	$b4 = $b4 + $hbp;
	$hit = $hit1 + $hit2 + $hit3 +$hr;
	if($inning){
		$h_inning = ($inning - ($inning % 3)) / 3;
	}else{
		$h_inning = "";
	}
	if($inning % 3 == 0){
		$inning0 = "selected";
	}else if($inning % 3 == 1){
		$inning1 = "selected";
	}else if($inning % 3 == 2){
		$inning2 = "selected";
	}
}else{
	echo "<script>alert('잘못된 접근입니다.');";
	echo "history.back()</script>";
}
if($record_row['player_no'] != $player_no){
	echo "<script>alert('잘못된 접근입니다.');";
	echo "history.back()</script>";
}
?>
<html>
	<body>
		<hr>
		<h3>저장된 기록 수정</h3>
		<? if($_GET['pos'] == "타자"){ ?>
		<form method="post" action="RecordUpdateProc.php" method="post">
			<div class="row gtr-uniform">
				<div class="col-3 col-6-xsmall">
					<input type="text" name="league_name" id="league_name" value="<?=$league_name?>" placeholder="리그 이름">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="team_name" id="team_name" value="<?=$team_name?>" placeholder="팀 이름">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="at_game" id="at_game" value="<?=$at_game?>" placeholder="경기 수" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="at_play" id="at_play" value="<?=$at_play?>" placeholder="타석" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="at_bat" id="at_bat" value="<?=$at_bat?>" placeholder="타수" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit" id="hit" value="<?=$hit?>" placeholder="안타 [1H,2H,3H,HR 포함]" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit2" id="hit2" value="<?=$hit2?>" placeholder="2루타" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit3" id="hit3" value="<?=$hit3?>" placeholder="3루타" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hr" id="hr" value="<?=$hr?>" placeholder="홈런" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="b4" id="b4" value="<?=$b4?>" placeholder="볼넷 [사사구 포함]" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hbp" id="hbp" value="<?=$hbp?>" placeholder="사사구" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="rs" id="rs" value="<?=$rs?>" placeholder="득점" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="rbi" id="rbi" value="<?=$rbi?>" placeholder="타점" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="sb" id="sb" value="<?=$sb?>" placeholder="도루" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="so" id="so" value="<?=$so?>" placeholder="삼진" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="sf" id="sf" value="<?=$sf?>" placeholder="희생타" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="sh" id="sh" value="<?=$sh?>" placeholder="희생번트" pattern="\d{1,3}">
				</div>
				<input type="hidden" value="data" name="edit">
				<input type="hidden" value="hit" name="pos">
				<input type="hidden" value="<?=$no?>" name="no">
				<div class="col-12" style="text-align:center">
					<input type="submit" value="수정" class="primary" style="width:30%">
				</div>
			</div>
		</form>
		<? } else if($_GET['pos'] == "투수") {?>
		<form method="post" action="RecordUpdateProc.php" method="post">
			<div class="row gtr-uniform">
				<div class="col-3 col-6-xsmall">
					<input type="text" name="league_name" id="league_name" value="<?=$league_name?>" placeholder="리그 이름">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="team_name" id="team_name" value="<?=$team_name?>" placeholder="팀 이름">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="at_game" id="at_game" value="<?=$at_game?>" placeholder="경기 수" pattern="\d{1,3}">
				</div>
				<div class="col-2 col-2-xsmall">
					<input type="text" name="inning" id="inning" value="<?=$h_inning?>" placeholder="이닝 *" pattern="\d{1,3}">
				</div>
				<div class="col-1 col-4-xsmall">
					<select class="custom-select" id="inning_2" name="inning_2">
						<option value="0" <?=$inning0?>>0</option>
						<option value="1" style="font-size:130%" <?=$inning1?>>⅓</option>
						<option value="2" style="font-size:130%" <?=$inning2?>>⅔</option>
					</select>
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="pitcher_count" id="pitcher_count" value="<?=$pitcher_count?>" placeholder="투구수" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="play_win" id="play_win" value="<?=$play_win?>" placeholder="승리" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="play_lose" id="play_lose" value="<?=$play_lose?>" placeholder="패배" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="play_save" id="play_save" value="<?=$play_save?>" placeholder="세이브" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="play_hold" id="play_hold" value="<?=$play_hold?>" placeholder="홀드" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit" id="hit" placeholder="피안타 [1H,2H,3H,HR 포함]" value="<?=$hit?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hr" id="hr" placeholder="피홈런" value="<?=$hr?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit2" id="hit2" placeholder="2루타" value="<?=$hit2?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hit3" id="hit3" placeholder="3루타" value="<?=$hit3?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="so" id="so" placeholder="탈삼진" value="<?=$so?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="b4" id="b4" placeholder="볼넷 [사사구 포함]" value="<?=$b4?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="hbp" id="hbp" placeholder="사사구" value="<?=$hbp?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="er" id="er" placeholder="실점" value="<?=$er?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="at_play" id="at_play" placeholder="상대 타자수" value="<?=$at_play?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="sf" id="sf" placeholder="희생타" value="<?=$sf?>" pattern="\d{1,3}">
				</div>
				<div class="col-3 col-6-xsmall">
					<input type="text" name="sh" id="sh" placeholder="희생번트" value="<?=$sh?>" pattern="\d{1,3}">
				</div>
				<input type="hidden" value="data" name="edit">
				<input type="hidden" value="pic" name="pos">
				<input type="hidden" value="<?=$no?>" name="no">
				<div class="col-12" style="text-align:center">
					<input type="submit" value="수정" class="primary" style="width:30%">
				</div>
			</div>
		</form>
		<? } ?>
	</body>
</html>